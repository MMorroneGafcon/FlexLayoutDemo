{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DragDrop = void 0;\n\nvar Rect_1 = require(\"./Rect\");\n/** @internal */\n\n\nvar canUseDOM = !!(typeof window !== \"undefined\" && window.document && window.document.createElement);\n\nvar DragDrop =\n/** @class */\nfunction () {\n  /** @internal */\n  function DragDrop() {\n    /** @internal */\n    this._manualGlassManagement = false;\n    /** @internal */\n\n    this._startX = 0;\n    /** @internal */\n\n    this._startY = 0;\n    /** @internal */\n\n    this._dragDepth = 0;\n    /** @internal */\n\n    this._glassShowing = false;\n    /** @internal */\n\n    this._dragging = false;\n    /** @internal */\n\n    this._active = false; // drag and drop is in progress, can be used on ios to prevent body scrolling (see demo)\n\n    if (canUseDOM) {\n      // check for serverside rendering\n      this._glass = document.createElement(\"div\");\n      this._glass.style.zIndex = \"998\";\n      this._glass.style.backgroundColor = \"transparent\";\n      this._glass.style.outline = \"none\";\n    }\n\n    this._defaultGlassCursor = \"default\";\n    this._onMouseMove = this._onMouseMove.bind(this);\n    this._onMouseUp = this._onMouseUp.bind(this);\n    this._onKeyPress = this._onKeyPress.bind(this);\n    this._onDragCancel = this._onDragCancel.bind(this);\n    this._onDragEnter = this._onDragEnter.bind(this);\n    this._onDragLeave = this._onDragLeave.bind(this);\n    this.resizeGlass = this.resizeGlass.bind(this);\n    this._lastClick = 0;\n    this._clickX = 0;\n    this._clickY = 0;\n  } // if you add the glass pane then you should remove it\n\n\n  DragDrop.prototype.addGlass = function (fCancel) {\n    var _a;\n\n    if (!this._glassShowing) {\n      if (!this._document) {\n        this._document = window.document;\n      }\n\n      if (!this._rootElement) {\n        this._rootElement = this._document.body;\n      }\n\n      this.resizeGlass();\n      (_a = this._document.defaultView) === null || _a === void 0 ? void 0 : _a.addEventListener('resize', this.resizeGlass);\n\n      this._document.body.appendChild(this._glass);\n\n      this._glass.tabIndex = -1;\n\n      this._glass.focus();\n\n      this._glass.addEventListener(\"keydown\", this._onKeyPress);\n\n      this._glass.addEventListener(\"dragenter\", this._onDragEnter, {\n        passive: false\n      });\n\n      this._glass.addEventListener(\"dragover\", this._onMouseMove, {\n        passive: false\n      });\n\n      this._glass.addEventListener(\"dragleave\", this._onDragLeave, {\n        passive: false\n      });\n\n      this._glassShowing = true;\n      this._fDragCancel = fCancel;\n      this._manualGlassManagement = false;\n    } else {\n      // second call to addGlass (via dragstart)\n      this._manualGlassManagement = true;\n    }\n  };\n\n  DragDrop.prototype.resizeGlass = function () {\n    var glassRect = Rect_1.Rect.fromElement(this._rootElement);\n    glassRect.positionElement(this._glass, \"fixed\");\n  };\n\n  DragDrop.prototype.hideGlass = function () {\n    var _a;\n\n    if (this._glassShowing) {\n      this._document.body.removeChild(this._glass);\n\n      (_a = this._document.defaultView) === null || _a === void 0 ? void 0 : _a.removeEventListener('resize', this.resizeGlass);\n      this._glassShowing = false;\n      this._document = undefined;\n      this._rootElement = undefined;\n      this.setGlassCursorOverride(undefined);\n    }\n  };\n  /** @internal */\n\n\n  DragDrop.prototype._updateGlassCursor = function () {\n    var _a;\n\n    this._glass.style.cursor = (_a = this._glassCursorOverride) !== null && _a !== void 0 ? _a : this._defaultGlassCursor;\n  };\n  /** @internal */\n\n\n  DragDrop.prototype._setDefaultGlassCursor = function (cursor) {\n    this._defaultGlassCursor = cursor;\n\n    this._updateGlassCursor();\n  };\n\n  DragDrop.prototype.setGlassCursorOverride = function (cursor) {\n    this._glassCursorOverride = cursor;\n\n    this._updateGlassCursor();\n  };\n\n  DragDrop.prototype.startDrag = function (event, fDragStart, fDragMove, fDragEnd, fDragCancel, fClick, fDblClick, currentDocument, rootElement) {\n    // prevent 'duplicate' action (mouse event for same action as previous touch event (a fix for ios))\n    if (event && this._lastEvent && this._lastEvent.type.startsWith(\"touch\") && event.type.startsWith(\"mouse\") && event.timeStamp - this._lastEvent.timeStamp < 500) {\n      return;\n    }\n\n    this._lastEvent = event;\n\n    if (currentDocument) {\n      this._document = currentDocument;\n    } else {\n      this._document = window.document;\n    }\n\n    if (rootElement) {\n      this._rootElement = rootElement;\n    } else {\n      this._rootElement = this._document.body;\n    }\n\n    var posEvent = this._getLocationEvent(event);\n\n    this.addGlass(fDragCancel);\n\n    if (this._dragging) {\n      console.warn(\"this._dragging true on startDrag should never happen\");\n    }\n\n    if (event) {\n      this._startX = posEvent.clientX;\n      this._startY = posEvent.clientY;\n\n      if (!window.matchMedia || window.matchMedia(\"(pointer: fine)\").matches) {\n        this._setDefaultGlassCursor(getComputedStyle(event.target).cursor);\n      }\n\n      this._stopPropagation(event);\n\n      this._preventDefault(event);\n    } else {\n      this._startX = 0;\n      this._startY = 0;\n\n      this._setDefaultGlassCursor(\"default\");\n    }\n\n    this._dragging = false;\n    this._fDragStart = fDragStart;\n    this._fDragMove = fDragMove;\n    this._fDragEnd = fDragEnd;\n    this._fDragCancel = fDragCancel;\n    this._fClick = fClick;\n    this._fDblClick = fDblClick;\n    this._active = true;\n\n    if ((event === null || event === void 0 ? void 0 : event.type) === 'dragenter') {\n      this._dragDepth = 1;\n\n      this._rootElement.addEventListener(\"dragenter\", this._onDragEnter, {\n        passive: false\n      });\n\n      this._rootElement.addEventListener(\"dragover\", this._onMouseMove, {\n        passive: false\n      });\n\n      this._rootElement.addEventListener(\"dragleave\", this._onDragLeave, {\n        passive: false\n      });\n\n      this._document.addEventListener(\"dragend\", this._onDragCancel, {\n        passive: false\n      });\n\n      this._document.addEventListener(\"drop\", this._onMouseUp, {\n        passive: false\n      });\n    } else {\n      this._document.addEventListener(\"mouseup\", this._onMouseUp, {\n        passive: false\n      });\n\n      this._document.addEventListener(\"mousemove\", this._onMouseMove, {\n        passive: false\n      });\n\n      this._document.addEventListener(\"touchend\", this._onMouseUp, {\n        passive: false\n      });\n\n      this._document.addEventListener(\"touchmove\", this._onMouseMove, {\n        passive: false\n      });\n    }\n  };\n\n  DragDrop.prototype.isDragging = function () {\n    return this._dragging;\n  };\n\n  DragDrop.prototype.isActive = function () {\n    return this._active;\n  };\n\n  DragDrop.prototype.toString = function () {\n    var rtn = \"(DragDrop: \" + \"startX=\" + this._startX + \", startY=\" + this._startY + \", dragging=\" + this._dragging + \")\";\n    return rtn;\n  };\n  /** @internal */\n\n\n  DragDrop.prototype._onKeyPress = function (event) {\n    if (event.keyCode === 27) {\n      // esc\n      this._onDragCancel();\n    }\n  };\n  /** @internal */\n\n\n  DragDrop.prototype._onDragCancel = function () {\n    this._rootElement.removeEventListener(\"dragenter\", this._onDragEnter);\n\n    this._rootElement.removeEventListener(\"dragover\", this._onMouseMove);\n\n    this._rootElement.removeEventListener(\"dragleave\", this._onDragLeave);\n\n    this._document.removeEventListener(\"dragend\", this._onDragCancel);\n\n    this._document.removeEventListener(\"drop\", this._onMouseUp);\n\n    this._document.removeEventListener(\"mousemove\", this._onMouseMove);\n\n    this._document.removeEventListener(\"mouseup\", this._onMouseUp);\n\n    this._document.removeEventListener(\"touchend\", this._onMouseUp);\n\n    this._document.removeEventListener(\"touchmove\", this._onMouseMove);\n\n    this.hideGlass();\n\n    if (this._fDragCancel !== undefined) {\n      this._fDragCancel(this._dragging);\n    }\n\n    this._dragging = false;\n    this._active = false;\n  };\n  /** @internal */\n\n\n  DragDrop.prototype._getLocationEvent = function (event) {\n    var posEvent = event;\n\n    if (event && event.touches) {\n      posEvent = event.touches[0];\n    }\n\n    return posEvent;\n  };\n  /** @internal */\n\n\n  DragDrop.prototype._getLocationEventEnd = function (event) {\n    var posEvent = event;\n\n    if (event.changedTouches) {\n      posEvent = event.changedTouches[0];\n    }\n\n    return posEvent;\n  };\n  /** @internal */\n\n\n  DragDrop.prototype._stopPropagation = function (event) {\n    if (event.stopPropagation) {\n      event.stopPropagation();\n    }\n  };\n  /** @internal */\n\n\n  DragDrop.prototype._preventDefault = function (event) {\n    if (event.preventDefault && event.cancelable) {\n      event.preventDefault();\n    }\n\n    return event;\n  };\n  /** @internal */\n\n\n  DragDrop.prototype._onMouseMove = function (event) {\n    this._lastEvent = event;\n\n    var posEvent = this._getLocationEvent(event);\n\n    this._stopPropagation(event);\n\n    this._preventDefault(event);\n\n    if (!this._dragging && (Math.abs(this._startX - posEvent.clientX) > 5 || Math.abs(this._startY - posEvent.clientY) > 5)) {\n      this._dragging = true;\n\n      if (this._fDragStart) {\n        this._setDefaultGlassCursor(\"move\");\n\n        this._dragging = this._fDragStart({\n          clientX: this._startX,\n          clientY: this._startY\n        });\n      }\n    }\n\n    if (this._dragging) {\n      if (this._fDragMove) {\n        this._fDragMove(posEvent);\n      }\n    }\n\n    return false;\n  };\n  /** @internal */\n\n\n  DragDrop.prototype._onMouseUp = function (event) {\n    this._lastEvent = event;\n\n    var posEvent = this._getLocationEventEnd(event);\n\n    this._stopPropagation(event);\n\n    this._preventDefault(event);\n\n    this._active = false;\n\n    this._rootElement.removeEventListener(\"dragenter\", this._onDragEnter);\n\n    this._rootElement.removeEventListener(\"dragover\", this._onMouseMove);\n\n    this._rootElement.removeEventListener(\"dragleave\", this._onDragLeave);\n\n    this._document.removeEventListener(\"dragend\", this._onDragCancel);\n\n    this._document.removeEventListener(\"drop\", this._onMouseUp);\n\n    this._document.removeEventListener(\"mousemove\", this._onMouseMove);\n\n    this._document.removeEventListener(\"mouseup\", this._onMouseUp);\n\n    this._document.removeEventListener(\"touchend\", this._onMouseUp);\n\n    this._document.removeEventListener(\"touchmove\", this._onMouseMove);\n\n    if (!this._manualGlassManagement) {\n      this.hideGlass();\n    }\n\n    if (this._dragging) {\n      this._dragging = false;\n\n      if (this._fDragEnd) {\n        this._fDragEnd(event);\n      } // dump(\"set dragging = false\\n\");\n\n    } else {\n      if (this._fDragCancel) {\n        this._fDragCancel(this._dragging);\n      }\n\n      if (Math.abs(this._startX - posEvent.clientX) <= 5 && Math.abs(this._startY - posEvent.clientY) <= 5) {\n        var isDoubleClick = false;\n        var clickTime = new Date().getTime(); // check for double click\n\n        if (Math.abs(this._clickX - posEvent.clientX) <= 5 && Math.abs(this._clickY - posEvent.clientY) <= 5) {\n          if (clickTime - this._lastClick < 500) {\n            if (this._fDblClick) {\n              this._fDblClick(event);\n\n              isDoubleClick = true;\n            }\n          }\n        }\n\n        if (!isDoubleClick && this._fClick) {\n          this._fClick(event);\n        }\n\n        this._lastClick = clickTime;\n        this._clickX = posEvent.clientX;\n        this._clickY = posEvent.clientY;\n      }\n    }\n\n    return false;\n  };\n  /** @internal */\n\n\n  DragDrop.prototype._onDragEnter = function (event) {\n    this._preventDefault(event);\n\n    this._stopPropagation(event);\n\n    this._dragDepth++;\n    return false;\n  };\n  /** @internal */\n\n\n  DragDrop.prototype._onDragLeave = function (event) {\n    this._preventDefault(event);\n\n    this._stopPropagation(event);\n\n    this._dragDepth--;\n\n    if (this._dragDepth <= 0) {\n      this._onDragCancel();\n    }\n\n    return false;\n  };\n\n  DragDrop.instance = new DragDrop();\n  return DragDrop;\n}();\n\nexports.DragDrop = DragDrop;","map":{"version":3,"mappings":"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","names":["canUseDOM","window","document","createElement","_glass","style","zIndex","backgroundColor","outline","_defaultGlassCursor","_onMouseMove","bind","_onMouseUp","_onKeyPress","_onDragCancel","_onDragEnter","_onDragLeave","resizeGlass","_lastClick","_clickX","_clickY","DragDrop","fCancel","_glassShowing","_document","_rootElement","body","defaultView","_a","addEventListener","appendChild","tabIndex","focus","passive","_fDragCancel","_manualGlassManagement","glassRect","Rect_1","fromElement","positionElement","removeChild","removeEventListener","undefined","setGlassCursorOverride","cursor","_glassCursorOverride","_updateGlassCursor","event","fDragStart","fDragMove","fDragEnd","fDragCancel","fClick","fDblClick","currentDocument","rootElement","_lastEvent","type","startsWith","timeStamp","posEvent","_getLocationEvent","addGlass","_dragging","console","warn","_startX","clientX","_startY","clientY","matchMedia","matches","_setDefaultGlassCursor","getComputedStyle","target","_stopPropagation","_preventDefault","_fDragStart","_fDragMove","_fDragEnd","_fClick","_fDblClick","_active","_dragDepth","rtn","keyCode","hideGlass","touches","changedTouches","stopPropagation","preventDefault","cancelable","Math","abs","_getLocationEventEnd","isDoubleClick","clickTime","Date","getTime","exports"],"sources":["C:\\Users\\mmorrone\\UnityProjects\\my-app\\node_modules\\flexlayout-react\\src\\DragDrop.ts"],"sourcesContent":["import * as React from \"react\";\nimport { Rect } from \"./Rect\";\n\n/** @internal */\nconst canUseDOM = !!(typeof window !== \"undefined\" && window.document && window.document.createElement);\n\nexport class DragDrop {\n    static instance = new DragDrop();\n\n    /** @internal */\n    private _fDblClick: ((event: Event) => void) | undefined;\n    /** @internal */\n    private _fClick: ((event: Event) => void) | undefined;\n    /** @internal */\n    private _fDragEnd: ((event: Event) => void) | undefined;\n    /** @internal */\n    private _fDragMove: ((event: React.MouseEvent<Element>) => void) | undefined;\n    /** @internal */\n    private _fDragStart: ((pos: { clientX: number; clientY: number }) => boolean) | undefined;\n    /** @internal */\n    private _fDragCancel: ((wasDragging: boolean) => void) | undefined;\n\n    /** @internal */\n    private _glass: HTMLDivElement | undefined;\n    /** @internal */\n    private _defaultGlassCursor: string;\n    /** @internal */\n    private _glassCursorOverride: string | undefined;\n    /** @internal */\n    private _manualGlassManagement: boolean = false;\n    /** @internal */\n    private _lastClick: number;\n    /** @internal */\n    private _clickX: number;\n    /** @internal */\n    private _clickY: number;\n    /** @internal */\n    private _startX: number = 0;\n    /** @internal */\n    private _startY: number = 0;\n    /** @internal */\n    private _dragDepth: number = 0;\n    /** @internal */\n    private _glassShowing: boolean = false;\n    /** @internal */\n    private _dragging: boolean = false;\n    /** @internal */\n    private _active: boolean = false; // drag and drop is in progress, can be used on ios to prevent body scrolling (see demo)\n    /** @internal */\n    private _document?: HTMLDocument;\n    /** @internal */\n    private _rootElement?: HTMLElement | undefined;\n    /** @internal */\n    private _lastEvent?: Event | React.MouseEvent<HTMLDivElement, MouseEvent> | React.TouchEvent<HTMLDivElement> | React.DragEvent<Element> | undefined;\n\n    /** @internal */\n    private constructor() {\n        if (canUseDOM) {\n            // check for serverside rendering\n            this._glass = document.createElement(\"div\");\n            this._glass.style.zIndex = \"998\";\n            this._glass.style.backgroundColor = \"transparent\";\n            this._glass.style.outline = \"none\";\n        }\n\n        this._defaultGlassCursor = \"default\";\n\n        this._onMouseMove = this._onMouseMove.bind(this);\n        this._onMouseUp = this._onMouseUp.bind(this);\n        this._onKeyPress = this._onKeyPress.bind(this);\n        this._onDragCancel = this._onDragCancel.bind(this);\n        this._onDragEnter = this._onDragEnter.bind(this);\n        this._onDragLeave = this._onDragLeave.bind(this);\n        this.resizeGlass = this.resizeGlass.bind(this);\n\n        this._lastClick = 0;\n        this._clickX = 0;\n        this._clickY = 0;\n    }\n\n    // if you add the glass pane then you should remove it\n    addGlass(fCancel: ((wasDragging: boolean) => void) | undefined) {\n        if (!this._glassShowing) {\n            if (!this._document) {\n                this._document = window.document;\n            }\n            if (!this._rootElement) {\n                this._rootElement = this._document.body;\n            }\n            this.resizeGlass();\n            this._document.defaultView?.addEventListener('resize', this.resizeGlass);\n            this._document.body.appendChild(this._glass!);\n            this._glass!.tabIndex = -1;\n            this._glass!.focus();\n            this._glass!.addEventListener(\"keydown\", this._onKeyPress);\n            this._glass!.addEventListener(\"dragenter\", this._onDragEnter, { passive: false });\n            this._glass!.addEventListener(\"dragover\", this._onMouseMove, { passive: false });\n            this._glass!.addEventListener(\"dragleave\", this._onDragLeave, { passive: false });\n            this._glassShowing = true;\n            this._fDragCancel = fCancel;\n            this._manualGlassManagement = false;\n        } else {\n            // second call to addGlass (via dragstart)\n            this._manualGlassManagement = true;\n        }\n    }\n\n    resizeGlass() {\n        const glassRect = Rect.fromElement(this._rootElement!);\n        glassRect.positionElement(this._glass!, \"fixed\");\n    }\n\n    hideGlass() {\n        if (this._glassShowing) {\n            this._document!.body.removeChild(this._glass!);\n            this._document!.defaultView?.removeEventListener('resize', this.resizeGlass);\n            this._glassShowing = false;\n            this._document = undefined;\n            this._rootElement = undefined;\n            this.setGlassCursorOverride(undefined);\n        }\n    }\n\n    /** @internal */\n    _updateGlassCursor() {\n        this._glass!.style.cursor = this._glassCursorOverride ?? this._defaultGlassCursor;\n    }\n\n    /** @internal */\n    _setDefaultGlassCursor(cursor: string) {\n        this._defaultGlassCursor = cursor;\n        this._updateGlassCursor()\n    }\n\n    setGlassCursorOverride(cursor: string | undefined) {\n        this._glassCursorOverride = cursor;\n        this._updateGlassCursor()\n    }\n\n    startDrag(\n        event: Event | React.MouseEvent<HTMLDivElement, MouseEvent> | React.TouchEvent<HTMLDivElement> | React.DragEvent<Element> | undefined,\n        fDragStart: ((pos: { clientX: number; clientY: number }) => boolean) | undefined,\n        fDragMove: ((event: React.MouseEvent<Element>) => void) | undefined,\n        fDragEnd: ((event: Event) => void) | undefined,\n        fDragCancel?: ((wasDragging: boolean) => void) | undefined,\n        fClick?: ((event: Event) => void) | undefined,\n        fDblClick?: ((event: Event) => void) | undefined,\n        currentDocument?: Document,\n        rootElement?: HTMLDivElement\n    ) {\n        // prevent 'duplicate' action (mouse event for same action as previous touch event (a fix for ios))\n        if (event && this._lastEvent && this._lastEvent.type.startsWith(\"touch\") && event.type.startsWith(\"mouse\") && event.timeStamp - this._lastEvent.timeStamp < 500) {\n            return;\n        }\n\n        this._lastEvent = event;\n\n        if (currentDocument) {\n            this._document = currentDocument;\n        } else {\n            this._document = window.document;\n        }\n        if (rootElement) {\n            this._rootElement = rootElement;\n        } else {\n            this._rootElement = this._document.body;\n        }\n\n        const posEvent = this._getLocationEvent(event);\n        this.addGlass(fDragCancel);\n\n        if (this._dragging) {\n            console.warn(\"this._dragging true on startDrag should never happen\");\n        }\n\n        if (event) {\n            this._startX = posEvent.clientX;\n            this._startY = posEvent.clientY;\n            if (!window.matchMedia || window.matchMedia(\"(pointer: fine)\").matches) {\n                this._setDefaultGlassCursor(getComputedStyle(event.target as Element).cursor);\n            }\n            this._stopPropagation(event);\n            this._preventDefault(event);\n        } else {\n            this._startX = 0;\n            this._startY = 0;\n            this._setDefaultGlassCursor(\"default\");\n        }\n\n        this._dragging = false;\n        this._fDragStart = fDragStart;\n        this._fDragMove = fDragMove;\n        this._fDragEnd = fDragEnd;\n        this._fDragCancel = fDragCancel;\n        this._fClick = fClick;\n        this._fDblClick = fDblClick;\n\n        this._active = true;\n\n        if (event?.type === 'dragenter') {\n            this._dragDepth = 1;\n            this._rootElement.addEventListener(\"dragenter\", this._onDragEnter, { passive: false });\n            this._rootElement.addEventListener(\"dragover\", this._onMouseMove, { passive: false });\n            this._rootElement.addEventListener(\"dragleave\", this._onDragLeave, { passive: false });\n            this._document.addEventListener(\"dragend\", this._onDragCancel, { passive: false });\n            this._document.addEventListener(\"drop\", this._onMouseUp, { passive: false });\n        } else {\n            this._document.addEventListener(\"mouseup\", this._onMouseUp, { passive: false });\n            this._document.addEventListener(\"mousemove\", this._onMouseMove, { passive: false });\n            this._document.addEventListener(\"touchend\", this._onMouseUp, { passive: false });\n            this._document.addEventListener(\"touchmove\", this._onMouseMove, { passive: false });\n        }\n    }\n\n    isDragging() {\n        return this._dragging;\n    }\n\n    isActive() {\n        return this._active;\n    }\n\n    toString() {\n        const rtn = \"(DragDrop: \" + \"startX=\" + this._startX + \", startY=\" + this._startY + \", dragging=\" + this._dragging + \")\";\n\n        return rtn;\n    }\n\n    /** @internal */\n    private _onKeyPress(event: KeyboardEvent) {\n        if (event.keyCode === 27) {\n            // esc\n            this._onDragCancel();\n        }\n    }\n\n    /** @internal */\n    private _onDragCancel() {\n        this._rootElement!.removeEventListener(\"dragenter\", this._onDragEnter);\n        this._rootElement!.removeEventListener(\"dragover\", this._onMouseMove);\n        this._rootElement!.removeEventListener(\"dragleave\", this._onDragLeave);\n        this._document!.removeEventListener(\"dragend\", this._onDragCancel);\n        this._document!.removeEventListener(\"drop\", this._onMouseUp);\n        this._document!.removeEventListener(\"mousemove\", this._onMouseMove);\n        this._document!.removeEventListener(\"mouseup\", this._onMouseUp);\n        this._document!.removeEventListener(\"touchend\", this._onMouseUp);\n        this._document!.removeEventListener(\"touchmove\", this._onMouseMove);\n        this.hideGlass();\n        if (this._fDragCancel !== undefined) {\n            this._fDragCancel(this._dragging);\n        }\n        this._dragging = false;\n        this._active = false;\n    }\n\n    /** @internal */\n    private _getLocationEvent(event: any) {\n        let posEvent: any = event;\n        if (event && event.touches) {\n            posEvent = event.touches[0];\n        }\n        return posEvent;\n    }\n\n    /** @internal */\n    private _getLocationEventEnd(event: any) {\n        let posEvent: any = event;\n        if (event.changedTouches) {\n            posEvent = event.changedTouches[0];\n        }\n        return posEvent;\n    }\n\n    /** @internal */\n    private _stopPropagation(event: Event | React.MouseEvent<HTMLDivElement, MouseEvent> | React.TouchEvent<HTMLDivElement> | React.DragEvent<Element>) {\n        if (event.stopPropagation) {\n            event.stopPropagation();\n        }\n    }\n\n    /** @internal */\n    private _preventDefault(event: Event | React.MouseEvent<HTMLDivElement, MouseEvent> | React.TouchEvent<HTMLDivElement> | React.DragEvent<Element>) {\n        if (event.preventDefault && event.cancelable) {\n            event.preventDefault();\n        }\n        return event;\n    }\n\n    /** @internal */\n    private _onMouseMove(event: Event | React.MouseEvent<HTMLDivElement, MouseEvent> | React.TouchEvent<HTMLDivElement> | React.DragEvent<Element>) {\n        this._lastEvent = event;\n\n        const posEvent = this._getLocationEvent(event);\n        this._stopPropagation(event);\n        this._preventDefault(event);\n\n        if (!this._dragging && (Math.abs(this._startX - posEvent.clientX) > 5 || Math.abs(this._startY - posEvent.clientY) > 5)) {\n            this._dragging = true;\n            if (this._fDragStart) {\n                this._setDefaultGlassCursor(\"move\");\n                this._dragging = this._fDragStart({ clientX: this._startX, clientY: this._startY });\n            }\n        }\n\n        if (this._dragging) {\n            if (this._fDragMove) {\n                this._fDragMove(posEvent);\n            }\n        }\n        return false;\n    }\n\n    /** @internal */\n    private _onMouseUp(event: Event) {\n        this._lastEvent = event;\n\n        const posEvent = this._getLocationEventEnd(event);\n\n        this._stopPropagation(event);\n        this._preventDefault(event);\n\n        this._active = false;\n\n        this._rootElement!.removeEventListener(\"dragenter\", this._onDragEnter);\n        this._rootElement!.removeEventListener(\"dragover\", this._onMouseMove);\n        this._rootElement!.removeEventListener(\"dragleave\", this._onDragLeave);\n        this._document!.removeEventListener(\"dragend\", this._onDragCancel);\n        this._document!.removeEventListener(\"drop\", this._onMouseUp);\n        this._document!.removeEventListener(\"mousemove\", this._onMouseMove);\n        this._document!.removeEventListener(\"mouseup\", this._onMouseUp);\n        this._document!.removeEventListener(\"touchend\", this._onMouseUp);\n        this._document!.removeEventListener(\"touchmove\", this._onMouseMove);\n\n        if (!this._manualGlassManagement) {\n            this.hideGlass();\n        }\n\n        if (this._dragging) {\n            this._dragging = false;\n            if (this._fDragEnd) {\n                this._fDragEnd(event);\n            }\n            // dump(\"set dragging = false\\n\");\n        } else {\n            if (this._fDragCancel) {\n                this._fDragCancel(this._dragging);\n            }\n            if (Math.abs(this._startX - posEvent.clientX) <= 5 && Math.abs(this._startY - posEvent.clientY) <= 5) {\n\n                let isDoubleClick = false;\n                const clickTime = new Date().getTime();\n                // check for double click\n                if (Math.abs(this._clickX - posEvent.clientX) <= 5 && Math.abs(this._clickY - posEvent.clientY) <= 5) {\n                    if (clickTime - this._lastClick < 500) {\n                        if (this._fDblClick) {\n                            this._fDblClick(event);\n                            isDoubleClick = true;\n                        }\n                    }\n                }\n \n                if (!isDoubleClick && this._fClick) {\n                    this._fClick(event);\n                }\n\n                this._lastClick = clickTime;\n                this._clickX = posEvent.clientX;\n                this._clickY = posEvent.clientY;\n            }\n        }\n        return false;\n    }\n\n    /** @internal */\n    private _onDragEnter(event: DragEvent) {\n        this._preventDefault(event);\n        this._stopPropagation(event);\n        this._dragDepth++;\n        return false;\n    }\n\n    /** @internal */\n    private _onDragLeave(event: DragEvent) {\n        this._preventDefault(event);\n        this._stopPropagation(event);\n        this._dragDepth--;\n        if (this._dragDepth <= 0) {\n            this._onDragCancel();\n        }\n        return false;\n    }\n}\n"]},"metadata":{},"sourceType":"script"}
{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.showPopup = void 0;\n\nvar React = require(\"react\");\n\nvar DragDrop_1 = require(\"./DragDrop\");\n\nvar Types_1 = require(\"./Types\");\n\nvar TabButtonStamp_1 = require(\"./view/TabButtonStamp\");\n/** @internal */\n\n\nfunction showPopup(triggerElement, items, onSelect, layout, iconFactory, titleFactory) {\n  var layoutDiv = layout.getRootDiv();\n  var classNameMapper = layout.getClassName;\n  var currentDocument = triggerElement.ownerDocument;\n  var triggerRect = triggerElement.getBoundingClientRect();\n  var layoutRect = layoutDiv.getBoundingClientRect();\n  var elm = currentDocument.createElement(\"div\");\n  elm.className = classNameMapper(Types_1.CLASSES.FLEXLAYOUT__POPUP_MENU_CONTAINER);\n\n  if (triggerRect.left < layoutRect.left + layoutRect.width / 2) {\n    elm.style.left = triggerRect.left - layoutRect.left + \"px\";\n  } else {\n    elm.style.right = layoutRect.right - triggerRect.right + \"px\";\n  }\n\n  if (triggerRect.top < layoutRect.top + layoutRect.height / 2) {\n    elm.style.top = triggerRect.top - layoutRect.top + \"px\";\n  } else {\n    elm.style.bottom = layoutRect.bottom - triggerRect.bottom + \"px\";\n  }\n\n  DragDrop_1.DragDrop.instance.addGlass(function () {\n    return onHide();\n  });\n  DragDrop_1.DragDrop.instance.setGlassCursorOverride(\"default\");\n  layoutDiv.appendChild(elm);\n\n  var onHide = function () {\n    layout.hidePortal();\n    DragDrop_1.DragDrop.instance.hideGlass();\n    layoutDiv.removeChild(elm);\n    elm.removeEventListener(\"mousedown\", onElementMouseDown);\n    currentDocument.removeEventListener(\"mousedown\", onDocMouseDown);\n  };\n\n  var onElementMouseDown = function (event) {\n    event.stopPropagation();\n  };\n\n  var onDocMouseDown = function (event) {\n    onHide();\n  };\n\n  elm.addEventListener(\"mousedown\", onElementMouseDown);\n  currentDocument.addEventListener(\"mousedown\", onDocMouseDown);\n  layout.showPortal(React.createElement(PopupMenu, {\n    currentDocument: currentDocument,\n    onSelect: onSelect,\n    onHide: onHide,\n    items: items,\n    classNameMapper: classNameMapper,\n    layout: layout,\n    iconFactory: iconFactory,\n    titleFactory: titleFactory\n  }), elm);\n}\n\nexports.showPopup = showPopup;\n/** @internal */\n\nvar PopupMenu = function (props) {\n  var items = props.items,\n      onHide = props.onHide,\n      onSelect = props.onSelect,\n      classNameMapper = props.classNameMapper,\n      layout = props.layout,\n      iconFactory = props.iconFactory,\n      titleFactory = props.titleFactory;\n\n  var onItemClick = function (item, event) {\n    onSelect(item);\n    onHide();\n    event.stopPropagation();\n  };\n\n  var itemElements = items.map(function (item, i) {\n    return React.createElement(\"div\", {\n      key: item.index,\n      className: classNameMapper(Types_1.CLASSES.FLEXLAYOUT__POPUP_MENU_ITEM),\n      \"data-layout-path\": \"/popup-menu/tb\" + i,\n      onClick: function (event) {\n        return onItemClick(item, event);\n      },\n      title: item.node.getHelpText()\n    }, item.node.getModel().isLegacyOverflowMenu() ? item.node._getNameForOverflowMenu() : React.createElement(TabButtonStamp_1.TabButtonStamp, {\n      node: item.node,\n      layout: layout,\n      iconFactory: iconFactory,\n      titleFactory: titleFactory\n    }));\n  });\n  return React.createElement(\"div\", {\n    className: classNameMapper(Types_1.CLASSES.FLEXLAYOUT__POPUP_MENU),\n    \"data-layout-path\": \"/popup-menu\"\n  }, itemElements);\n};","map":{"version":3,"mappings":"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","names":["showPopup","triggerElement","items","onSelect","layout","iconFactory","titleFactory","layoutDiv","getRootDiv","classNameMapper","getClassName","currentDocument","ownerDocument","triggerRect","getBoundingClientRect","layoutRect","elm","createElement","className","Types_1","FLEXLAYOUT__POPUP_MENU_CONTAINER","left","width","style","right","top","height","bottom","DragDrop_1","instance","addGlass","setGlassCursorOverride","appendChild","onHide","hidePortal","hideGlass","removeChild","removeEventListener","onElementMouseDown","onDocMouseDown","event","stopPropagation","addEventListener","showPortal","React","PopupMenu","exports","props","onItemClick","item","itemElements","map","i","key","index","FLEXLAYOUT__POPUP_MENU_ITEM","onClick","title","node","getHelpText","getModel","isLegacyOverflowMenu","_getNameForOverflowMenu","TabButtonStamp_1","FLEXLAYOUT__POPUP_MENU"],"sources":["C:\\Users\\mmorrone\\UnityProjects\\my-app\\node_modules\\flexlayout-react\\src\\PopupMenu.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { DragDrop } from \"./DragDrop\";\nimport { TabNode } from \"./model/TabNode\";\nimport { CLASSES } from \"./Types\";\nimport { ILayoutCallbacks } from \"./view/Layout\";\nimport { TabButtonStamp } from \"./view/TabButtonStamp\";\n\n/** @internal */\nexport function showPopup(\n    triggerElement: Element,\n    items: { index: number; node: TabNode }[],\n    onSelect: (item: { index: number; node: TabNode }) => void,\n    layout: ILayoutCallbacks,\n    iconFactory?: (node: TabNode) => React.ReactNode | undefined,\n    titleFactory?: (node: TabNode) => React.ReactNode | undefined,\n) {\n    const layoutDiv = layout.getRootDiv();\n    const classNameMapper = layout.getClassName;\n    const currentDocument = triggerElement.ownerDocument;\n    const triggerRect = triggerElement.getBoundingClientRect();\n    const layoutRect = layoutDiv.getBoundingClientRect();\n\n    const elm = currentDocument.createElement(\"div\");\n    elm.className = classNameMapper(CLASSES.FLEXLAYOUT__POPUP_MENU_CONTAINER);\n    if (triggerRect.left < layoutRect.left + layoutRect.width / 2) {\n        elm.style.left = triggerRect.left - layoutRect.left + \"px\";\n    } else {\n        elm.style.right = layoutRect.right - triggerRect.right + \"px\";\n    }\n\n    if (triggerRect.top < layoutRect.top + layoutRect.height / 2) {\n        elm.style.top = triggerRect.top - layoutRect.top + \"px\";\n    } else {\n        elm.style.bottom = layoutRect.bottom - triggerRect.bottom + \"px\";\n    }\n    DragDrop.instance.addGlass(() => onHide());\n    DragDrop.instance.setGlassCursorOverride(\"default\");\n\n    layoutDiv.appendChild(elm);\n\n    const onHide = () => {\n        layout.hidePortal();\n        DragDrop.instance.hideGlass();\n        layoutDiv.removeChild(elm);\n        elm.removeEventListener(\"mousedown\", onElementMouseDown);\n        currentDocument.removeEventListener(\"mousedown\", onDocMouseDown);\n    };\n\n    const onElementMouseDown = (event: Event) => {\n        event.stopPropagation();\n    };\n\n    const onDocMouseDown = (event: Event) => {\n        onHide();\n    };\n\n    elm.addEventListener(\"mousedown\", onElementMouseDown);\n    currentDocument.addEventListener(\"mousedown\", onDocMouseDown);\n\n    layout.showPortal(<PopupMenu\n        currentDocument={currentDocument}\n        onSelect={onSelect}\n        onHide={onHide}\n        items={items}\n        classNameMapper={classNameMapper}\n        layout={layout}\n        iconFactory={iconFactory}\n        titleFactory={titleFactory}\n    />, elm);\n}\n\n/** @internal */\ninterface IPopupMenuProps {\n    items: { index: number; node: TabNode }[];\n    currentDocument: Document;\n    onHide: () => void;\n    onSelect: (item: { index: number; node: TabNode }) => void;\n    classNameMapper: (defaultClassName: string) => string;\n    layout: ILayoutCallbacks;\n    iconFactory?: (node: TabNode) => React.ReactNode | undefined;\n    titleFactory?: (node: TabNode) => React.ReactNode | undefined;\n}\n\n/** @internal */\nconst PopupMenu = (props: IPopupMenuProps) => {\n    const { items, onHide, onSelect, classNameMapper, layout, iconFactory, titleFactory} = props;\n\n    const onItemClick = (item: { index: number; node: TabNode }, event: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n        onSelect(item);\n        onHide();\n        event.stopPropagation();\n    };\n\n    const itemElements = items.map((item, i) => (\n        <div key={item.index}\n            className={classNameMapper(CLASSES.FLEXLAYOUT__POPUP_MENU_ITEM)}\n            data-layout-path={\"/popup-menu/tb\" + i}\n            onClick={(event) => onItemClick(item, event)}\n            title={item.node.getHelpText()} >\n            {item.node.getModel().isLegacyOverflowMenu() ? \n            item.node._getNameForOverflowMenu() :\n            <TabButtonStamp \n                node={item.node}\n                layout={layout}\n                iconFactory={iconFactory}\n                titleFactory={titleFactory}\n            />}\n        </div>\n    ));\n\n    return (\n        <div className={classNameMapper(CLASSES.FLEXLAYOUT__POPUP_MENU)}\n        data-layout-path=\"/popup-menu\"\n        >\n            {itemElements}\n        </div>);\n};\n"]},"metadata":{},"sourceType":"script"}